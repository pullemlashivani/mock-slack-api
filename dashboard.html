<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mock Slack Dashboard</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; max-width: 900px; margin: 2rem auto; }
      table { border-collapse: collapse; width: 100%; margin-top: 0.5rem; }
      th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      th { background: #f7f7f7; }
      button { padding: 8px 12px; margin-top: 8px; cursor: pointer; }
      .card { border: 1px solid #ddd; padding: 12px; border-radius: 8px; margin: 12px 0; }
    </style>
  </head>
  <body>
    <h1>Mock Slack Dashboard</h1>
    <div class="card">
      <h2>Users</h2>
      <button id="loadUsers">Load users</button>
      <table id="users"></table>
    </div>

    <div class="card">
      <h2>License</h2>
      <button id="loadLicense">Load license</button>
      <pre id="license"></pre>
    </div>

    <script>
      const api = "http://localhost:3000";

      document.getElementById("loadUsers").onclick = async () => {
        const res = await fetch(`${api}/users/list?exclude_bots=true`);
        const data = await res.json();
        const table = document.getElementById("users");
        table.innerHTML = "<tr><th>ID</th><th>Name</th><th>Real Name</th><th>Email</th><th>Title</th></tr>";
        (data.members || []).forEach(u => {
          table.innerHTML += `<tr>
            <td>${u.id}</td><td>${u.name}</td><td>${u.real_name}</td><td>${u.email}</td><td>${u.title}</td>
          </tr>`;
        });
      };

      document.getElementById("loadLicense").onclick = async () => {
        const res  = await fetch(`${api}/license.info`);
        const data = await res.json();
        document.getElementById("license").textContent = JSON.stringify(data.license, null, 2);
      };
    </script>
  </body>
</html>
